<!DOCTYPE html>
<html lang="es">
	<head>
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel="stylesheet" href="/css/dist/css/bootstrap.min.css">
		<link href="https://fonts.googleapis.com/css2?family=Alata&family=Lato&family=Anton&family=Montserrat&display=swap" rel="stylesheet">
		<!-- Font Awesome JS 
	  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
	  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>-->
	  <script src="https://kit.fontawesome.com/36370f8f5c.js" crossorigin="anonymous"></script>
	  <link rel="stylesheet" href="/css/nav.css">
	  <link rel="stylesheet" href="/css/styles.css">
	  <script src="/js/main.js"></script>
	  <title>TASA| Menú </title>
	</head>
	<body onload="load_properties()">
	<div class="col-md-12 col-md-offset-1">
		{% with messages = get_flashed_messages() %}
			{% if messages %}
				{% for message  in messages %}
					<div class="alert alert-success" role="alert">
						{{ message }}
					</div>
				{% endfor %}
			{% endif %}
		{% endwith %}
	</div>
		<div class="logo">
			<img src="/images/logo.png" alt="tasa" width="250" height="100">
		</div>
		<div class="wrapper">
			<nav class="navbar navbar-expand-lg navbar-light rounded">
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample10" aria-controls="navbarsExample10" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse justify-content-md-center" id="navbarsExample10">
					<ul class="nav navbar-nav">
						<li class="nav-item" role="presentation">
							<a class="nav-link" id="home_tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Inicio</a>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link" href="#" data-toggle="dropdown">Fincas</a>
							<ul class="dropdown-menu">
								<li>
									<a class="dropdown-item" id="property_tab" data-toggle="tab" href="#property" role="tab" aria-controls="property" aria-selected="true">Registrar Finca</a>
									
								</li>
								<li><a class="dropdown-item" href="#">Ver Fincas &raquo</a>
									<ul class="submenu dropdown-menu" id="properties">
									</ul>
								</li>
							</ul>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link" href="#" data-toggle="dropdown">Informes</a>
							<ul class="dropdown-menu">
								<li>
									<a class="dropdown-item" id="" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Informe de Visita</a>
									<a class="dropdown-item" id="" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Informe de Fotografía</a>
								</li>
							</ul>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link" href="#" data-toggle="dropdown">Historico</a>
							<ul class="dropdown-menu">
								<li>
									<a class="dropdown-item" id="" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Historico de Visita</a>
									<a class="dropdown-item" id="" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Historico de Fotografía</a>
								</li>
							</ul>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link" href="#" data-toggle="dropdown">Perfiles</a>
							<ul class="dropdown-menu">
								<li>
									<a class="dropdown-item" id="" data-toggle="tab" href="#userList" role="tab" aria-controls="userList" onclick="list();" aria-selected="true">Lista de usuarios con perfiles</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</nav>
		</div>
		<div class="header-actions">
			<a class="icon" href="/">
				<img src="/images/calendar.svg" alt="calendar">

			</a>
			<a class="icon" href="/">
				<img src="/images/bell.svg" alt="bell">

			</a>
			<a class="icon head-icon" href="/logout" style="color: #e8480d;">
				<i class="far fa-user fa-3x"></i>
			</a>
			<label class="head-label"> <a href="/logout">Cerrar Sesión</a> </label>
			
		</div>		
		<div id="main-content">
			<!--ADD-USER-TAB-->
			<div class="tab-content" id="myTabContent">
				<div class="tab-pane fade" id="profiles" role="tabpanel" aria-labelledby="profiles-tab">
					<div class="tab-form">
						<div class="panel1">
							<h3 class="center form-group col-md-12"> <i class="far fa-user"></i> Crear Usuario </h3>
							<form enctype="multipart/form-data" action="/saveUser" accept-charset="uft-8" method="post" id="saveUserForm">
								<div class="flex-container">
									<div class="form-row">
										<label class="form-group col-md-12 l-label"> Datos Personales</label>
										<div class="form-group col-md-6">
											<label for="name">Nombre</label>
											<input type="text" class="form-control form-control-lg" name="name" id="name">
										</div>
										<div class="form-group col-md-6">
											<label for="last_name">Apellido</label>
											<input type="text" class="form-control form-control-lg" name="last_name" id="last_name">
										</div>
										<div class="form-group col-md-6">
											<label for="age">Edad</label>
											<input type="number" class="form-control form-control-lg" name="age" id="age">
										</div>
										<div class="form-group col-md-6">
											<label for="profesion">Profesion</label>
											<input type="text" class="form-control form-control-lg" name="profesion" id="profesion">
										</div>
										<div class="form-group col-md-6">
											<label for="phone">Telefono</label>
											<input type="text" class="form-control form-control-lg" name="phone" id="phone">
										</div>
									</div>
									<div class="separator"> </div>
									<div class="form-row">
										<label class="form-group col-md-12 l-label"> Cuenta </label>
										<div class="form-group col-md-6">
											<label for="email">Correo Electronico</label>
											<input type="email" class="form-control form-control-lg" name="email" id="email">
										</div>
										<div class="form-group col-md-6">
											<label for="role">Perfil</label>
											<select id="role" name="role" class="form-control form-control-lg">
												<option> </option>
												<option value="1">Administrador</option>
												<option value="2">Capataz</option>
												<option value="4">Dueño de la finca</option>
												<option value="8">Encargado de Compras</option>
												<option value="9">Encargado de Pagos</option>
												<option value="7">Influenciador de Decisiones de Compra</option>
												<option value="3">Responsable Decisiones de Compra</option>
												<option value="5">Socio Adicional</option>
												<option value="6">Vendedor TASA</option>
											</select>
										</div>
										<div class="form-group col-md-12">
											<label for="password">Contraseña</label>
											<input type="password" class="form-control form-control-lg" name="password" id="password">
										</div>									
										<div class="form-group col-md-12">
											<label for="confirm_password">Confirma tu Contraseña</label>
											<input type="confirm_password" class="form-control form-control-lg" name="confirm_password" id="confirm_password">
										</div>
									</div>
								</div>
							</form>
						</div>
						<div class="panel2 panel-user">
							<h1 class="panel-heading"> La sostenibilidad en la producción es nuestro propósito </h1>
						</div>
					</div>
					<button type="button" class="btn custom-btn user-btn border border-white" onclick="list()"> <i class="far fa-folder-open"></i> Ver lista Usuarios </button>
					<button type="button" class="btn custom-btn save-btn" onclick="up()"> <label> Guardar Usuario </label> <i class="far fa-check-circle"></i> </button>
				</div>
				<!--END tab to add user -->
				<div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home_tab">
					<h1 class="center" style="color: #fff; font-family: 'Alata', sans-serif">Impulsados por la Innovación y Fortalecidos por la Experiencia. </h1>
					<h1 class="center" style="color: #fff; font-family: 'Alata', sans-serif">Bienvenidos a Técnicas Agrícolas S.A.</h1>
				</div>
				<div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">.C3..</div>
				<!--Property Tab -->
				<div class="tab-pane fade" id="property" role="tabpanel" aria-labelledby="property-tab">
					<form enctype="multipart/form-data" action="/save_property" accept-charset="uft-8" method="post" id="savePropertyForm">
					<div class="tab-form">
						<div class="panel1">
							<h3 class="center form-group col-md-12"> <img src="/images/wheat_icon.svg" width="50" height="50"> Registar Finca </h3>
							<div class="flex-container add-property">
								<label class="form-group col-md-12 l-label"> Datos de la Finca</label>
								<div class="form-row form-property">
									<div class="form-group col-md-6">
										<label for="property_name">Nombre</label>
										<input type="text" class="form-control form-control-lg" name="name" id="name">
									</div>
									<div class="form-group col-md-6">
										<label for="business_name">Razon Social</label>
										<input type="text" class="form-control form-control-lg" name="business_name" id="bussiness_name">
									</div>
									<div class="form-group col-md-6">
										<label for="phone">Telefono</label>
										<input type="phone" class="form-control form-control-lg" name="phone" id="phone">
									</div>
									<div class="form-group col-md-6">
										<label for="property_address">Dirección</label>
										<input type="text" class="form-control form-control-lg" name="address" id="address">
									</div>
									<div class="form-group col-md-6">
										<label for="web_site">Dirección Web</label>
										<input type="text" class="form-control form-control-lg" name="web_site" id="web_site">
									</div>
									<div class="form-group col-md-6">
										<label for="total_ha_property">Total Hectareas de  la Finca</label>
										<input type="number" class="form-control form-control-lg" name="total_ha_property" id="total_ha_property">
									</div>
									<div class="form-group col-md-6">
										<label for="sowing_system">Sistema de Siembra</label>
										<select id="sowing_system" name="sowing_system" class="form-control form-control-lg">
											<option> </option>
											<option value="1">Arroz Secano</option>
											<option value="2">Arroz de Riego</option>
										</select>
									</div>
								</div>
								<div class="separator"> </div>
								<div class="form-row form-property-2" id="lands">
									<div class="form-group col-md-6" name="name_land">
										<label for="name">Nombre del Lote</label>
										<input type="text" class="form-control form-control-lg" name="name_land_1" name="name_land_1" min="0">
									</div>
									<div class="form-group col-md-6" name="hec_land">
										<label for="name">Hectareas Lote</label>
										<input type="number" class="form-control form-control-lg" name="hec_land_1" name="hec_land_1" min="0">
									</div>
									<div class="form-group col-md-6" name="name_land">
										<label for="name">Nombre del Lote</label>
										<input type="text" class="form-control form-control-lg" name="name_land_1" name="name_land_1" min="0">
									</div>
									<div class="form-group col-md-6" name="hec_land">
										<label for="name">Hectareas Lote</label>
										<input type="number" class="form-control form-control-lg" name="hec_land_1" name="hec_land_1" min="0">
									</div>
									<div class="form-group col-md-6" name="name_land">
										<label for="name">Nombre del Lote</label>
										<input type="text" class="form-control form-control-lg" name="name_land_1" name="name_land_1" min="0">
									</div>
									<div class="form-group col-md-6" name="hec_land">
										<label for="name">Hectareas Lote</label>
										<input type="number" class="form-control form-control-lg" name="hec_land_1" id="hec_land_1" min="0">
									</div>
									<input type="hidden" name="lands" id="l_lands">
									<input type="hidden" name="table_name" value="property">
									
								</div>
								<button type="button" class="btn btn-link form-btn add-btn"  onclick="add()"> <i class="fas fa-plus-circle fa-2x align-icon"></i> Agregar Lotes </button>
							</div>
						</div>
						<div class="panel1 panel3">
							<h3 class="center form-group col-md-12"> <i class="fas fa-user"></i> Seleccione Usuarios </h3>
							<div class="flex-container add-property">
								<label class="form-group col-md-12 l-label" style="padding-top: 4.5%;"> Usuarios de la Finca</label>
								<div class="form-row" id="list_users">
								</div>
							</div>
						</div>
						</form>
					</div>
					<button type="button" class="btn custom-btn user-btn border border-white" onclick="f_home()"> Volver Al Inicio </button>
					<button type="button" class="btn custom-btn save-btn" onclick="up_property()"> <label> Guardar Finca </label> <i class="far fa-check-circle"></i> </button>
		</div>
		<!--Tab to see a land -->
		<div class="tab-pane fade" id="viewLand" role="tabpanel" aria-labelledby="land_tab">
			<div id="seeLand">
			</div>
			<button type="button" class="btn custom-btn user-btn border border-white" onclick="f_home()"> Volver Al Inicio </button>
		</div>
		<!--Tab to see a Property -->
		<div class="tab-pane fade" id="viewProperty" role="tabpanel" aria-labelledby="property_tab">
			<div id="seeProperty">
			</div>
			<button type="button" class="btn custom-btn user-btn border border-white" onclick="f_home()"> Volver Al Inicio </button>
		</div>
		<!--Tab to see a Stages -->
		<div class="tab-pane fade" id="viewStage" role="tabpanel" aria-labelledby="stage_tab">
			<form enctype="multipart/form-data" action="/add_stage" accept-charset="uft-8" method="post" id="segmentStageForm">
			<div id="seeStage">
			</div>
			<button type="button" class="btn custom-btn user-btn border border-white" onclick="f_stages()"> Ir a Segmentos </button>
			<div class="segment-actions">	
				<label class="btn custom-btn save-btn segment-btn" style="width: 30%;">  <input type="file" style="display: none;" name="files" multiple/> +3 Fotografías <i class="fas fa-camera"></i> </label>
				<button type="button" class="btn custom-btn save-btn segment-btn" onclick="addProduct()" style="width: 20%; margin-left: 5%;"> <label> Agregar Producto </label> <i class="fas fa-plus"></i> </button>
				<button type="button" class="btn custom-btn save-btn segment-btn" onclick="upStage()"style="width: 26%; margin-right: 15.5%"> <label> Guardar </label> <i class="far fa-check-circle"></i> </button>
				<button type="button" class="btn custom-btn save-btn segment-btn" style="width: 20%; margin-left: 10%;"> <label> Chat </label> <i class="far fa-comment-dots"></i> </button>
			</div>
			</form>
		</div>
		<!--End Tab to see a land -->
			<!--Profile Tab -->
		<div class="tab-pane fade" id="userList" role="tabpanel" aria-labelledby="property-tab">
			<div id="panel_list" class="panel1 panel-list">
				<h3 class="main-headers"><i class="far fa-folder-open"></i> Lista de Usuarios </h3>
				<div id="userlist"></div>
				<button type="button" class="btn custom-btn"  onclick="page(0, 7,'userList?', userlist)"> <i class="fas fa-arrow-left"></i></button>
				<button type="button" class="btn custom-btn"  onclick="page(1, 7,'userList?', userlist)"> <i class="fas fa-arrow-right"></i></button>
				<div class="actions">
					<button type="button" class="btn custom-btn btn-action"  onclick="addUser()"> <i class="fas fa-user-plus"></i> Agregar Usuario </button>
					<button type="button" class="btn custom-btn btn-action"  onclick="edit()"> <i class="fas fa-pencil-alt"></i> Editar </button>
					<button type="button" class="btn custom-btn btn-action"  onclick="show_user()"> <i class="fas fa-search"></i> Consultar </button>
					<button type="button" class="btn custom-btn btn-action btn-delete"  onclick="confirm_delete()"> <i class="fas fa-trash"></i> Eliminar </button>
				</div>
			</div>
			<button type="button" class="btn custom-btn user-btn border border-white" onclick="f_home()"> Volver al Inicio </button>
		</div>
		<!--Show User-->
		<div class="tab-pane fade" id="user" role="tabpanel" aria-labelledby="user-tab">
			<div id="showUser" class="panel1 panel-list">
			</div>
			<button type="button" class="btn custom-btn user-btn border border-white" onclick="list()"> <i class="far fa-folder-open"></i> Ver lista Usuarios </button>
		</div>
		
		<!--Edit User-->
		<div class="tab-pane fade" id="edituser" role="tabpanel" aria-labelledby="user-tab">
			<div id="editUser">
			</div>
			<button type="button" class="btn custom-btn user-btn border border-white" onclick="list()"> <i class="far fa-folder-open"></i> Ver lista Usuarios </button>
			<button type="button" id="btn_approve" class="btn custom-btn save-btn hide" onclick="up_edit()"> Guardar Cambios <i class="far fa-check-circle"></i> </button>
		</div>
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script>window.jQuery || document.write('<script src="/css/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
		<script src="/css/assets/js/vendor/popper.min.js"></script>
		<script src="/css/dist/js/bootstrap.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" type="text/javascript"></script>
	</body>
</html>
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="text-align:center;">
        <h4 class="modal-title" id="deleteModalLabel">Esta segur@ de eliminar este usuario ?</h4>
      </div>
     
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-danger" onclick="deleteUser()">Eliminar</button>
      </div>
    </div>
  </div>
</div>
	{% if action == 1 %}
		<script> 
			alert('Usuario Actualizado');
			clear();
			list();
			window.history.pushState({}, "", "/");
		</script>
	{%elif action == 4 %}
		<script> 
			alert('Segmento Agregado');
			clear();
			load_land_info({{property_id}},{{land_id}});
			window.history.pushState({}, "", "/");
		</script>
	{% endif%}


